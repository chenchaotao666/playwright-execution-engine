<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playwright æ‰§è¡Œå¼•æ“æ¼”ç¤º</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        
        .header {
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .demo-section {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .demo-section h3 {
            color: #495057;
            margin-top: 0;
        }
        
        textarea {
            width: 100%;
            height: 200px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            padding: 10px;
            resize: vertical;
        }
        
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        
        button:hover {
            background: #0056b3;
        }
        
        button:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        
        .output {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
            margin-top: 10px;
        }
        
        .test-page {
            border: 2px solid #007bff;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            background: white;
        }
        
        .test-element {
            margin: 10px 0;
        }
        
        .test-element input, .test-element select, .test-element button {
            margin: 5px;
            padding: 8px;
        }
        
        .result-box {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            display: none;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* æ ‡ç­¾é¡µæ ·å¼ */
        .tab-container {
            margin-bottom: 30px;
        }

        .tab-nav {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
            margin-bottom: 0;
            overflow-x: auto;
            white-space: nowrap;
        }

        .tab-button {
            background: none;
            border: none;
            padding: 15px 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #495057;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
            white-space: nowrap;
            min-width: 140px;
        }

        .tab-button:hover {
            background: #e9ecef;
            color: #007bff;
        }

        .tab-button.active {
            background: white;
            color: #007bff;
            border-bottom-color: #007bff;
        }

        .tab-content {
            display: none;
            background: white;
            border: 1px solid #dee2e6;
            border-top: none;
            min-height: 400px;
        }

        .tab-content.active {
            display: block;
        }

        .tab-inner {
            padding: 20px;
        }

        .api-category {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .api-category h5 {
            margin: 0 0 10px 0;
            color: #856404;
        }

        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .mini-test {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
        }

        .mini-test h6 {
            margin: 0 0 10px 0;
            color: #495057;
            font-size: 14px;
        }

        .mini-test textarea {
            height: 120px;
            font-size: 12px;
        }

        .mini-test button {
            padding: 6px 12px;
            font-size: 12px;
        }

        .mini-test .output {
            max-height: 150px;
            font-size: 11px;
            margin-top: 8px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ­ Playwright æ‰§è¡Œå¼•æ“æ¼”ç¤º</h1>
        <p>åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è¿è¡Œ Playwright è„šæœ¬</p>
    </div>

    <!-- æµ‹è¯•é¡µé¢å…ƒç´  -->
    <div class="test-page">
        <h3>ğŸ¯ æµ‹è¯•é¡µé¢</h3>
        <p>è¿™äº›å…ƒç´ å¯ä»¥è¢« Playwright è„šæœ¬æ“ä½œï¼š</p>
        
        <div class="test-element">
            <label for="username">ç”¨æˆ·å:</label>
            <input type="text" id="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" />
        </div>
        
        <div class="test-element">
            <label for="password">å¯†ç :</label>
            <input type="password" id="password" placeholder="è¯·è¾“å…¥å¯†ç " />
        </div>
        
        <div class="test-element">
            <label for="email">é‚®ç®±:</label>
            <input type="email" id="email" placeholder="example@email.com" />
        </div>
        
        <div class="test-element">
            <label for="country">å›½å®¶:</label>
            <select id="country">
                <option value="">é€‰æ‹©å›½å®¶</option>
                <option value="cn">ä¸­å›½</option>
                <option value="us">ç¾å›½</option>
                <option value="jp">æ—¥æœ¬</option>
            </select>
        </div>
        
        <div class="test-element">
            <label>
                <input type="checkbox" id="agree" />
                æˆ‘åŒæ„æœåŠ¡æ¡æ¬¾
            </label>
        </div>
        
        <div class="test-element">
            <button id="submit-btn" onclick="showResult()">æäº¤</button>
            <button id="reset-btn" onclick="resetForm()">é‡ç½®</button>
            <button id="disabled-btn" disabled>ç¦ç”¨æŒ‰é’®</button>
        </div>

        <div class="test-element">
            <label for="multi-select">å¤šé€‰ä¸‹æ‹‰:</label>
            <select id="multi-select" multiple>
                <option value="option1">é€‰é¡¹1</option>
                <option value="option2">é€‰é¡¹2</option>
                <option value="option3">é€‰é¡¹3</option>
            </select>
        </div>

        <div class="test-element">
            <fieldset>
                <legend>å•é€‰æŒ‰é’®ç»„:</legend>
                <label><input type="radio" name="gender" value="male"> ç”·</label>
                <label><input type="radio" name="gender" value="female"> å¥³</label>
                <label><input type="radio" name="gender" value="other"> å…¶ä»–</label>
            </fieldset>
        </div>

        <div class="test-element">
            <label for="file-input">æ–‡ä»¶ä¸Šä¼ :</label>
            <input type="file" id="file-input" />
        </div>

        <div class="test-element">
            <label for="textarea-input">æ–‡æœ¬åŸŸ:</label>
            <textarea id="textarea-input" placeholder="è¾“å…¥å¤šè¡Œæ–‡æœ¬"></textarea>
        </div>

        <div class="test-element">
            <div id="hover-target" style="padding: 10px; background: #f0f0f0; cursor: pointer;">
                æ‚¬åœæµ‹è¯•åŒºåŸŸ (é¼ æ ‡æ‚¬åœä¼šå˜è‰²)
            </div>
        </div>

        <div class="test-element">
            <div id="dynamic-content" style="display: none; padding: 10px; background: #d4edda;">
                åŠ¨æ€æ˜¾ç¤ºçš„å†…å®¹
            </div>
            <button onclick="toggleDynamicContent()">åˆ‡æ¢åŠ¨æ€å†…å®¹</button>
        </div>
        
        <div class="debug-section" style="margin: 20px 0; padding: 10px; border: 2px solid #ccc;">
            <h4>è°ƒè¯•å·¥å…·</h4>
            <button onclick="debugGlobalScope()">è°ƒè¯•å…¨å±€ä½œç”¨åŸŸ</button>
            <button onclick="testLocatorDirect()">ç›´æ¥æµ‹è¯• LocatorAdapter</button>
            <div id="debug-output" style="margin-top: 10px; padding: 10px; background: #f5f5f5; font-family: monospace; white-space: pre-wrap;"></div>
        </div>

        <div class="test-element">
            <div class="nested-elements">
                <div data-testid="parent-container">
                    <span class="child-element">å­å…ƒç´ 1</span>
                    <span class="child-element">å­å…ƒç´ 2</span>
                    <span class="child-element">å­å…ƒç´ 3</span>
                </div>
            </div>
        </div>
        
        <div id="result" class="result-box">
            è¡¨å•æäº¤æˆåŠŸï¼
        </div>
    </div>

    <!-- æ ‡ç­¾é¡µå®¹å™¨ -->
    <div class="tab-container">
        <div class="tab-nav">
            <button class="tab-button active" onclick="switchTab('basic-operations')">ğŸ¯ åŸºç¡€æ“ä½œ</button>
            <button class="tab-button" onclick="switchTab('modern-locators')">ğŸ” ç°ä»£å®šä½å™¨</button>
            <button class="tab-button" onclick="switchTab('waiting-assertions')">â±ï¸ ç­‰å¾…æ–­è¨€</button>
            <button class="tab-button" onclick="switchTab('advanced-features')">ğŸ”§ é«˜çº§åŠŸèƒ½</button>
            <button class="tab-button" onclick="switchTab('custom-testing')">âœï¸ è‡ªå®šä¹‰æµ‹è¯•</button>
        </div>

        <!-- ğŸ¯ åŸºç¡€æ“ä½œæµ‹è¯• -->
        <div id="basic-operations" class="tab-content active">
            <div class="tab-inner">
                <div class="api-category">
                    <h5>é¡µé¢å¯¼èˆªå’ŒåŸºç¡€æ“ä½œ</h5>
                    <p>æµ‹è¯•é¡µé¢å¯¼èˆªã€å…ƒç´ äº¤äº’ã€è¡¨å•å¡«å†™ç­‰åŸºç¡€åŠŸèƒ½</p>
                </div>
                
                <div class="test-grid">
                    <div class="mini-test">
                        <h6>è¡¨å•å¡«å†™æµ‹è¯•</h6>
                        <textarea id="basic-form">import { test, expect } from '@playwright/test';

test('åŸºç¡€è¡¨å•å¡«å†™', async ({ page }) => {
  await page.fill('#username', 'testuser');
  await page.fill('#password', 'password123');
  await page.fill('#email', 'test@example.com');
  await page.selectOption('#country', 'cn');
  await page.check('#agree');
  await page.click('#submit-btn');
  
  await expect(page.locator('#result')).toBeVisible();
});</textarea>
                        <button onclick="runMiniScript('basic-form')">è¿è¡Œ</button>
                        <div id="basic-form-output" class="output"></div>
                    </div>

                    <div class="mini-test">
                        <h6>é”®ç›˜æ“ä½œæµ‹è¯•</h6>
                        <textarea id="keyboard-test">import { test, expect } from '@playwright/test';

test('é”®ç›˜æ“ä½œ', async ({ page }) => {
  await page.click('#username');
  await page.type('#username', 'Hello');
  await page.press('#username', 'Home');
  await page.type('#username', 'Hi ');
  
  await expect(page.locator('#username'))
    .toHaveValue('Hi Hello');
});</textarea>
                        <button onclick="runMiniScript('keyboard-test')">è¿è¡Œ</button>
                        <div id="keyboard-test-output" class="output"></div>
                    </div>

                    <div class="mini-test">
                        <h6>é¼ æ ‡æ“ä½œæµ‹è¯•</h6>
                        <textarea id="mouse-test">import { test, expect } from '@playwright/test';

test('é¼ æ ‡æ“ä½œ', async ({ page }) => {
  // å•å‡»å’ŒåŒå‡»
  await page.click('#username');
  await page.dblclick('#password');
  
  // æ‚¬åœæ“ä½œ
  await page.hover('#hover-target');
  
  console.log('é¼ æ ‡æ“ä½œå®Œæˆ');
});</textarea>
                        <button onclick="runMiniScript('mouse-test')">è¿è¡Œ</button>
                        <div id="mouse-test-output" class="output"></div>
                    </div>

                    <div class="mini-test">
                        <h6>å¤é€‰æ¡†å’Œå•é€‰æŒ‰é’®</h6>
                        <textarea id="checkbox-radio-test">import { test, expect } from '@playwright/test';

test('å¤é€‰æ¡†å’Œå•é€‰æŒ‰é’®', async ({ page }) => {
  // å¤é€‰æ¡†æ“ä½œ
  await page.check('#agree');
  await expect(page.locator('#agree')).toBeChecked();
  
  await page.uncheck('#agree');
  await expect(page.locator('#agree')).not.toBeChecked();
  
  // å•é€‰æŒ‰é’®æ“ä½œ
  await page.check('input[value="male"]');
  await expect(page.locator('input[value="male"]')).toBeChecked();
});</textarea>
                        <button onclick="runMiniScript('checkbox-radio-test')">è¿è¡Œ</button>
                        <div id="checkbox-radio-test-output" class="output"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ğŸ” ç°ä»£å®šä½å™¨æµ‹è¯• -->
        <div id="modern-locators" class="tab-content">
            <div class="tab-inner">
                <div class="api-category">
                    <h5>è¯­ä¹‰åŒ–å®šä½å™¨ (Semantic Locators)</h5>
                    <p>æµ‹è¯• getByRole, getByLabel, getByText, getByTestId ç­‰ç°ä»£å®šä½å™¨</p>
                </div>
                
                <div class="test-grid">
                    <div class="mini-test">
                        <h6>getByLabel å®šä½å™¨</h6>
                        <textarea id="getbylabel-test">import { test, expect } from '@playwright/test';

test('getByLabel å®šä½å™¨', async ({ page }) => {
  await page.getByLabel('ç”¨æˆ·å').fill('user123');
  await page.getByLabel('å¯†ç ').fill('pass123');
  await page.getByLabel('é‚®ç®±').fill('test@example.com');
  
  await expect(page.getByLabel('ç”¨æˆ·å')).toHaveValue('user123');
  await expect(page.getByLabel('å¯†ç ')).toHaveValue('pass123');
});</textarea>
                        <button onclick="runMiniScript('getbylabel-test')">è¿è¡Œ</button>
                        <div id="getbylabel-test-output" class="output"></div>
                    </div>

                    <div class="mini-test">
                        <h6>getByRole å®šä½å™¨</h6>
                        <textarea id="getbyrole-test">import { test, expect } from '@playwright/test';

test('getByRole å®šä½å™¨', async ({ page }) => {
  // æŒ‰é’®è§’è‰²
  await page.getByRole('button', { name: 'æäº¤' }).click();
  await expect(page.locator('#result')).toBeVisible();
  
  await page.getByRole('button', { name: 'é‡ç½®' }).click();
  await expect(page.locator('#result')).toBeHidden();
  
  // ä¸‹æ‹‰æ¡†è§’è‰²
  await page.getByRole('combobox').selectOption('us');
});</textarea>
                        <button onclick="runMiniScript('getbyrole-test')">è¿è¡Œ</button>
                        <div id="getbyrole-test-output" class="output"></div>
                    </div>

                    <div class="mini-test">
                        <h6>getByText å®šä½å™¨</h6>
                        <textarea id="getbytext-test">import { test, expect } from '@playwright/test';

test('getByText å®šä½å™¨', async ({ page }) => {
  // ç²¾ç¡®æ–‡æœ¬åŒ¹é…
  await page.getByText('æäº¤').click();
  await expect(page.locator('#result')).toBeVisible();
  
  // éƒ¨åˆ†æ–‡æœ¬åŒ¹é…
  await page.getByText('é‡ç½®').click();
  
  // éªŒè¯æ–‡æœ¬å­˜åœ¨
  await expect(page.getByText('è¡¨å•æäº¤æˆåŠŸï¼')).toBeHidden();
});</textarea>
                        <button onclick="runMiniScript('getbytext-test')">è¿è¡Œ</button>
                        <div id="getbytext-test-output" class="output"></div>
                    </div>

                    <div class="mini-test">
                        <h6>getByTestId å®šä½å™¨</h6>
                        <textarea id="getbytestid-test">import { test, expect } from '@playwright/test';

test('getByTestId å®šä½å™¨', async ({ page }) => {
  const container = page.getByTestId('parent-container');
  await expect(container).toBeVisible();
  
  // éªŒè¯å®¹å™¨å†…çš„å­å…ƒç´ 
  const childElements = container.locator('.child-element');
  await expect(childElements).toHaveCount(3);
  
  console.log('æ‰¾åˆ°å®¹å™¨å’Œå­å…ƒç´ ');
});</textarea>
                        <button onclick="runMiniScript('getbytestid-test')">è¿è¡Œ</button>
                        <div id="getbytestid-test-output" class="output"></div>
                    </div>

                    <div class="mini-test">
                        <h6>å®šä½å™¨é“¾å¼æ“ä½œ</h6>
                        <textarea id="locator-chaining-test">import { test, expect } from '@playwright/test';

test('å®šä½å™¨é“¾å¼æ“ä½œ', async ({ page }) => {
  const container = page.getByTestId('parent-container');
  
  // è·å–ç¬¬ä¸€ä¸ªå­å…ƒç´ 
  const firstChild = container.locator('.child-element').first();
  await expect(firstChild).toHaveText('å­å…ƒç´ 1');
  
  // è·å–æœ€åä¸€ä¸ªå­å…ƒç´ 
  const lastChild = container.locator('.child-element').last();
  await expect(lastChild).toHaveText('å­å…ƒç´ 3');
  
  // è·å–ç¬¬äºŒä¸ªå…ƒç´ 
  const secondChild = container.locator('.child-element').nth(1);
  await expect(secondChild).toHaveText('å­å…ƒç´ 2');
});</textarea>
                        <button onclick="runMiniScript('locator-chaining-test')">è¿è¡Œ</button>
                        <div id="locator-chaining-test-output" class="output"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- â±ï¸ ç­‰å¾…å’Œæ–­è¨€æµ‹è¯• -->
        <div id="waiting-assertions" class="tab-content">
            <div class="tab-inner">
                <div class="api-category">
                    <h5>ç­‰å¾…æœºåˆ¶å’Œé«˜çº§æ–­è¨€</h5>
                    <p>æµ‹è¯•å„ç§ç­‰å¾…ç­–ç•¥ã€å…ƒç´ çŠ¶æ€æ£€æŸ¥ã€å†…å®¹æ–­è¨€ç­‰åŠŸèƒ½</p>
                </div>
                
                <div class="test-grid">
                    <div class="mini-test">
                        <h6>å¯è§æ€§æ–­è¨€</h6>
                        <textarea id="visibility-test">import { test, expect } from '@playwright/test';

test('å¯è§æ€§æ–­è¨€', async ({ page }) => {
  // æ£€æŸ¥åˆå§‹çŠ¶æ€
  await expect(page.locator('#result')).toBeHidden();
  await expect(page.locator('#submit-btn')).toBeVisible();
  await expect(page.locator('#disabled-btn')).toBeVisible();
  
  // è§¦å‘æ˜¾ç¤º
  await page.click('#submit-btn');
  await expect(page.locator('#result')).toBeVisible();
});</textarea>
                        <button onclick="runMiniScript('visibility-test')">è¿è¡Œ</button>
                        <div id="visibility-test-output" class="output"></div>
                    </div>

                    <div class="mini-test">
                        <h6>å…ƒç´ çŠ¶æ€æ–­è¨€</h6>
                        <textarea id="state-test">import { test, expect } from '@playwright/test';

test('å…ƒç´ çŠ¶æ€æ–­è¨€', async ({ page }) => {
  // æŒ‰é’®çŠ¶æ€æ£€æŸ¥
  await expect(page.locator('#submit-btn')).toBeEnabled();
  await expect(page.locator('#disabled-btn')).toBeDisabled();
  
  // å¤é€‰æ¡†çŠ¶æ€
  await expect(page.locator('#agree')).not.toBeChecked();
  await page.check('#agree');
  await expect(page.locator('#agree')).toBeChecked();
});</textarea>
                        <button onclick="runMiniScript('state-test')">è¿è¡Œ</button>
                        <div id="state-test-output" class="output"></div>
                    </div>

                    <div class="mini-test">
                        <h6>å†…å®¹æ–­è¨€</h6>
                        <textarea id="content-test">import { test, expect } from '@playwright/test';

test('å†…å®¹æ–­è¨€', async ({ page }) => {
  await page.fill('#username', 'test123');
  await page.fill('#email', 'test@example.com');
  
  // å€¼æ–­è¨€
  await expect(page.locator('#username')).toHaveValue('test123');
  await expect(page.locator('#email')).toHaveValue('test@example.com');
  
  // æ–‡æœ¬æ–­è¨€
  await expect(page.getByText('ç”¨æˆ·å:')).toBeVisible();
  await expect(page.locator('label[for="username"]')).toHaveText('ç”¨æˆ·å:');
});</textarea>
                        <button onclick="runMiniScript('content-test')">è¿è¡Œ</button>
                        <div id="content-test-output" class="output"></div>
                    </div>

                    <div class="mini-test">
                        <h6>å±æ€§æ–­è¨€</h6>
                        <textarea id="attribute-test">import { test, expect } from '@playwright/test';

test('å±æ€§æ–­è¨€', async ({ page }) => {
  // å±æ€§æ£€æŸ¥
  await expect(page.locator('#username')).toHaveAttribute('type', 'text');
  await expect(page.locator('#password')).toHaveAttribute('type', 'password');
  await expect(page.locator('#email')).toHaveAttribute('type', 'email');
  
  // ID æ£€æŸ¥
  await expect(page.locator('#submit-btn')).toHaveId('submit-btn');
  
  // Placeholder æ£€æŸ¥
  await expect(page.locator('#username')).toHaveAttribute('placeholder', 'è¯·è¾“å…¥ç”¨æˆ·å');
});</textarea>
                        <button onclick="runMiniScript('attribute-test')">è¿è¡Œ</button>
                        <div id="attribute-test-output" class="output"></div>
                    </div>

                    <div class="mini-test">
                        <h6>ç­‰å¾…æœºåˆ¶æµ‹è¯•</h6>
                        <textarea id="waiting-test">import { test, expect } from '@playwright/test';

test('ç­‰å¾…æœºåˆ¶', async ({ page }) => {
  // ç­‰å¾…å…ƒç´ å¯è§
  await page.waitForSelector('#submit-btn', { state: 'visible' });
  
  // ç­‰å¾…å…ƒç´ éšè—
  await expect(page.locator('#result')).toBeHidden();
  
  // è§¦å‘æ˜¾ç¤ºå¹¶ç­‰å¾…
  await page.click('#submit-btn');
  await page.waitForSelector('#result:visible');
  
  // éªŒè¯æ˜¾ç¤ºæˆåŠŸ
  await expect(page.locator('#result')).toBeVisible();
});</textarea>
                        <button onclick="runMiniScript('waiting-test')">è¿è¡Œ</button>
                        <div id="waiting-test-output" class="output"></div>
                    </div>

                    <div class="mini-test">
                        <h6>æ•°é‡æ–­è¨€</h6>
                        <textarea id="count-test">import { test, expect } from '@playwright/test';

test('æ•°é‡æ–­è¨€', async ({ page }) => {
  // æ£€æŸ¥å­å…ƒç´ æ•°é‡
  await expect(page.locator('.child-element')).toHaveCount(3);
  
  // æ£€æŸ¥é€‰é¡¹æ•°é‡
  await expect(page.locator('#country option')).toHaveCount(4);
  await expect(page.locator('#multi-select option')).toHaveCount(3);
  
  // æ£€æŸ¥å•é€‰æŒ‰é’®æ•°é‡
  await expect(page.locator('input[name="gender"]')).toHaveCount(3);
});</textarea>
                        <button onclick="runMiniScript('count-test')">è¿è¡Œ</button>
                        <div id="count-test-output" class="output"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ğŸ”§ é«˜çº§åŠŸèƒ½æµ‹è¯• -->
        <div id="advanced-features" class="tab-content">
            <div class="tab-inner">
                <div class="api-category">
                    <h5>JavaScript æ‰§è¡Œã€XPathã€åŠ¨æ€å†…å®¹ç­‰é«˜çº§åŠŸèƒ½</h5>
                    <p>æµ‹è¯• evaluateã€XPath é€‰æ‹©å™¨ã€åŠ¨æ€å†…å®¹å¤„ç†ç­‰é«˜çº§ç‰¹æ€§</p>
                </div>
                
                <div class="test-grid">
                    <div class="mini-test">
                        <h6>JavaScript æ‰§è¡Œ</h6>
                        <textarea id="evaluate-test">import { test, expect } from '@playwright/test';

test('JavaScript æ‰§è¡Œ', async ({ page }) => {
  // æ‰§è¡Œ JavaScript è·å–é¡µé¢ä¿¡æ¯
  const title = await page.evaluate(() => document.title);
  console.log('é¡µé¢æ ‡é¢˜:', title);
  
  // ä¿®æ”¹å…ƒç´ å†…å®¹
  await page.evaluate(() => {
    document.querySelector('#hover-target').style.backgroundColor = 'lightblue';
    document.querySelector('#hover-target').textContent = 'å·²é€šè¿‡ JS ä¿®æ”¹';
  });
  
  await expect(page.locator('#hover-target')).toHaveText('å·²é€šè¿‡ JS ä¿®æ”¹');
});</textarea>
                        <button onclick="runMiniScript('evaluate-test')">è¿è¡Œ</button>
                        <div id="evaluate-test-output" class="output"></div>
                    </div>

                    <div class="mini-test">
                        <h6>XPath é€‰æ‹©å™¨</h6>
                        <textarea id="xpath-test">import { test, expect } from '@playwright/test';

test('XPath é€‰æ‹©å™¨', async ({ page }) => {
  // ä½¿ç”¨ XPath å®šä½å…ƒç´ 
  await page.fill('xpath=//input[@id="username"]', 'xpath_user');
  await page.click('xpath=//button[contains(text(), "æäº¤")]');
  
  // XPath æ–­è¨€
  await expect(page.locator('xpath=//input[@id="username"]'))
    .toHaveValue('xpath_user');
  
  // å¤æ‚ XPath - åªé€‰æ‹©æµ‹è¯•é¡µé¢åŒºåŸŸå†…çš„æŒ‰é’®
  const buttons = page.locator('xpath=//*[@class="test-page"]//button[not(@disabled)]');
  await expect(buttons).toHaveCount(5);
});</textarea>
                        <button onclick="runMiniScript('xpath-test')">è¿è¡Œ</button>
                        <div id="xpath-test-output" class="output"></div>
                    </div>

                    <div class="mini-test">
                        <h6>åŠ¨æ€å†…å®¹æµ‹è¯•</h6>
                        <textarea id="dynamic-test">import { test, expect } from '@playwright/test';

test('åŠ¨æ€å†…å®¹', async ({ page }) => {
  // åˆå§‹çŠ¶æ€æ£€æŸ¥
  await expect(page.locator('#dynamic-content')).toBeHidden();
  
  // è§¦å‘æ˜¾ç¤º
  await page.click('text=åˆ‡æ¢åŠ¨æ€å†…å®¹');
  await expect(page.locator('#dynamic-content')).toBeVisible();
  
  // å†æ¬¡åˆ‡æ¢
  await page.click('text=åˆ‡æ¢åŠ¨æ€å†…å®¹');
  await expect(page.locator('#dynamic-content')).toBeHidden();
});</textarea>
                        <button onclick="runMiniScript('dynamic-test')">è¿è¡Œ</button>
                        <div id="dynamic-test-output" class="output"></div>
                    </div>

                    <div class="mini-test">
                        <h6>å¤šé€‰ä¸‹æ‹‰æ¡†</h6>
                        <textarea id="multiselect-test">import { test, expect } from '@playwright/test';

test('å¤šé€‰ä¸‹æ‹‰æ¡†', async ({ page }) => {
  // é€‰æ‹©å¤šä¸ªé€‰é¡¹
  await page.selectOption('#multi-select', ['option1', 'option3']);
  
  // éªŒè¯é€‰æ‹©ç»“æœ
  const selectedOptions = await page.evaluate(() => {
    const select = document.querySelector('#multi-select');
    return Array.from(select.selectedOptions).map(option => option.value);
  });
  
  console.log('å·²é€‰æ‹©:', selectedOptions);
  expect(selectedOptions).toContain('option1');
  expect(selectedOptions).toContain('option3');
});</textarea>
                        <button onclick="runMiniScript('multiselect-test')">è¿è¡Œ</button>
                        <div id="multiselect-test-output" class="output"></div>
                    </div>

                    <div class="mini-test">
                        <h6>æ–‡æœ¬åŸŸæ“ä½œ</h6>
                        <textarea id="textarea-test">import { test, expect } from '@playwright/test';

test('æ–‡æœ¬åŸŸæ“ä½œ', async ({ page }) => {
  const longText = 'è¿™æ˜¯ä¸€æ®µé•¿æ–‡æœ¬\\nåŒ…å«å¤šè¡Œå†…å®¹\\nç”¨äºæµ‹è¯•æ–‡æœ¬åŸŸåŠŸèƒ½';
  
  await page.fill('#textarea-input', longText);
  await expect(page.locator('#textarea-input')).toHaveValue(longText);
  
  // è¿½åŠ æ–‡æœ¬
  await page.focus('#textarea-input');
  await page.press('#textarea-input', 'End');
  await page.type('#textarea-input', '\\né¢å¤–æ·»åŠ çš„å†…å®¹');
  
  const finalValue = await page.locator('#textarea-input').inputValue();
  console.log('æœ€ç»ˆæ–‡æœ¬:', finalValue);
});</textarea>
                        <button onclick="runMiniScript('textarea-test')">è¿è¡Œ</button>
                        <div id="textarea-test-output" class="output"></div>
                    </div>

                    <div class="mini-test">
                        <h6>æ¡ä»¶ç­‰å¾…æµ‹è¯•</h6>
                        <textarea id="conditional-wait-test">import { test, expect } from '@playwright/test';

test('æ¡ä»¶ç­‰å¾…', async ({ page }) => {
  // ç­‰å¾…å‡½æ•°æ¡ä»¶
  await page.waitForFunction(() => {
    return document.querySelector('#submit-btn') !== null;
  });
  
  // ç­‰å¾…è¶…æ—¶æµ‹è¯•
  await page.waitForTimeout(500);
  
  // ç­‰å¾…å…ƒç´ çŠ¶æ€å˜åŒ–
  await page.click('#submit-btn');
  await page.waitForFunction(() => {
    const result = document.querySelector('#result');
    return result && result.style.display !== 'none';
  });
  
  console.log('æ¡ä»¶ç­‰å¾…å®Œæˆ');
});</textarea>
                        <button onclick="runMiniScript('conditional-wait-test')">è¿è¡Œ</button>
                        <div id="conditional-wait-test-output" class="output"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- âœï¸ è‡ªå®šä¹‰æµ‹è¯•åŒºåŸŸ -->
        <div id="custom-testing" class="tab-content">
            <div class="tab-inner">
                <div class="api-category">
                    <h5>ç¼–å†™ä½ è‡ªå·±çš„æµ‹è¯•è„šæœ¬</h5>
                    <p>åœ¨è¿™é‡Œå¯ä»¥è‡ªç”±ç¼–å†™å’Œæµ‹è¯• Playwright è„šæœ¬</p>
                </div>
                
                <div class="demo-section">
                    <textarea id="custom-script" placeholder="åœ¨è¿™é‡Œç¼–å†™ä½ çš„ Playwright è„šæœ¬...">import { test, expect } from '@playwright/test';

test('æˆ‘çš„è‡ªå®šä¹‰æµ‹è¯•', async ({ page }) => {
  // åœ¨è¿™é‡Œç¼–å†™ä½ çš„æµ‹è¯•ä»£ç 
  await page.fill('#username', 'è‡ªå®šä¹‰ç”¨æˆ·');
  await page.click('#submit-btn');
  
  await expect(page.locator('#result')).toBeVisible();
  await expect(page.locator('#result')).toHaveText('è¡¨å•æäº¤æˆåŠŸï¼');
  
  console.log('è‡ªå®šä¹‰æµ‹è¯•å®Œæˆï¼');
});</textarea>
                    <button onclick="runScript('custom-script')">è¿è¡Œè‡ªå®šä¹‰è„šæœ¬</button>
                    <div id="custom-script-output" class="output"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- åŠ è½½ Playwright æ‰§è¡Œå¼•æ“ -->
    <script src="../dist/playwright-execution-engine.umd.js"></script>
    
    <script>
        // åˆå§‹åŒ–å¼•æ“
        const engine = new PlaywrightExecutionEngine({
            logLevel: 'info',
            timeout: 30000
        });

        // æ ‡ç­¾é¡µåˆ‡æ¢å‡½æ•°
        function switchTab(tabId) {
            // ç§»é™¤æ‰€æœ‰æ ‡ç­¾é¡µçš„æ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // æ¿€æ´»ç‚¹å‡»çš„æ ‡ç­¾é¡µ
            event.target.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }

        // è°ƒè¯•å…¨å±€ä½œç”¨åŸŸå‡½æ•°
        function debugGlobalScope() {
            console.log('=== å…¨å±€ä½œç”¨åŸŸè°ƒè¯• ===');
            console.log('window.PlaywrightExecutionEngine:', typeof window.PlaywrightExecutionEngine);
            console.log('window.PlaywrightPageAdapter:', typeof window.PlaywrightPageAdapter);
            console.log('window.PlaywrightLocatorAdapter:', typeof window.PlaywrightLocatorAdapter);
            console.log('window.PlaywrightWaitManager:', typeof window.PlaywrightWaitManager);
            console.log('window.PlaywrightEventSimulator:', typeof window.PlaywrightEventSimulator);
            console.log('window.PlaywrightExpectAdapter:', typeof window.PlaywrightExpectAdapter);
            console.log('window.PlaywrightLogger:', typeof window.PlaywrightLogger);
            console.log('window.PlaywrightRuntime:', typeof window.PlaywrightRuntime);
            console.log('==============================');
            
            // æµ‹è¯•åˆ›å»ºå®ä¾‹
            try {
                const page = new window.PlaywrightPageAdapter();
                console.log('PageAdapter å®ä¾‹åˆ›å»ºæˆåŠŸ:', page);
                console.log('PageAdapter.locator æ–¹æ³•:', typeof page.locator);
                
                const testLocator = page.locator('div');
                console.log('åˆ›å»º locator æˆåŠŸ:', testLocator);
                console.log('Locator æ„é€ å‡½æ•°:', testLocator.constructor.name);
            } catch (error) {
                console.error('åˆ›å»ºå®ä¾‹å¤±è´¥:', error);
            }
        }

        // ç›´æ¥æµ‹è¯• LocatorAdapter çš„å‡½æ•°
        function testLocatorDirect() {
            const output = document.getElementById('debug-output');
            output.textContent = '';
            
            try {
                console.log('=== ç›´æ¥ LocatorAdapter æµ‹è¯• ===');
                
                // 1. æ£€æŸ¥ LocatorAdapter ç±»
                console.log('LocatorAdapter ç±»å­˜åœ¨:', typeof window.PlaywrightLocatorAdapter);
                console.log('PageAdapter ç±»å­˜åœ¨:', typeof window.PlaywrightPageAdapter);
                
                // 2. åˆ›å»º PageAdapter å®ä¾‹
                const page = new window.PlaywrightPageAdapter();
                console.log('PageAdapter å®ä¾‹:', page);
                console.log('PageAdapter locator æ–¹æ³•:', typeof page.locator);
                
                // 3. ç›´æ¥ä½¿ç”¨ LocatorAdapter æ„é€ å‡½æ•°
                const directLocator = new window.PlaywrightLocatorAdapter('[data-testid="parent-container"]', page);
                console.log('ç›´æ¥åˆ›å»ºçš„ LocatorAdapter:', directLocator);
                console.log('ç›´æ¥åˆ›å»ºçš„ LocatorAdapter ç±»å‹:', directLocator.constructor.name);
                console.log('ç›´æ¥åˆ›å»ºçš„ LocatorAdapter æœ‰ locator æ–¹æ³•:', typeof directLocator.locator);
                
                // 4. é€šè¿‡ page.locator åˆ›å»º
                const pageLocator = page.locator('[data-testid="parent-container"]');
                console.log('é€šè¿‡ page.locator åˆ›å»ºçš„:', pageLocator);
                console.log('é€šè¿‡ page.locator åˆ›å»ºçš„ç±»å‹:', pageLocator.constructor.name);
                console.log('é€šè¿‡ page.locator åˆ›å»ºçš„æœ‰ locator æ–¹æ³•:', typeof pageLocator.locator);
                
                // 5. é€šè¿‡ page.getByTestId åˆ›å»º
                const testIdLocator = page.getByTestId('parent-container');
                console.log('é€šè¿‡ page.getByTestId åˆ›å»ºçš„:', testIdLocator);
                console.log('é€šè¿‡ page.getByTestId åˆ›å»ºçš„ç±»å‹:', testIdLocator.constructor.name);
                console.log('é€šè¿‡ page.getByTestId åˆ›å»ºçš„æœ‰ locator æ–¹æ³•:', typeof testIdLocator.locator);
                
                // 6. æµ‹è¯•åµŒå¥— locator è°ƒç”¨
                console.log('å°è¯•è°ƒç”¨ testIdLocator.locator...');
                const nestedLocator = testIdLocator.locator('.child-element');
                console.log('åµŒå¥— locator æˆåŠŸ:', nestedLocator);
                
                output.textContent = 'æ‰€æœ‰æµ‹è¯•æˆåŠŸ! æŸ¥çœ‹æ§åˆ¶å°äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚';
                
            } catch (error) {
                console.error('æµ‹è¯•å¤±è´¥:', error);
                console.error('é”™è¯¯å †æ ˆ:', error.stack);
                output.textContent = `æµ‹è¯•å¤±è´¥: ${error.message}\nå †æ ˆ: ${error.stack}`;
            }
        }

        // è¿è¡Œè¿·ä½ è„šæœ¬çš„å‡½æ•°
        async function runMiniScript(scriptId) {
            const scriptElement = document.getElementById(scriptId);
            const outputElement = document.getElementById(scriptId + '-output');
            const button = scriptElement.nextElementSibling;
            
            // ç¦ç”¨æŒ‰é’®å¹¶æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            button.disabled = true;
            button.innerHTML = '<span class="loading"></span> è¿è¡Œä¸­...';
            
            // æ¸…ç©ºè¾“å‡º
            outputElement.textContent = '';
            
            // æ‰§è¡Œæµ‹è¯•å‰é‡ç½®é¡µé¢çŠ¶æ€ï¼Œé˜²æ­¢ç”¨ä¾‹ç›¸äº’å½±å“
            outputElement.textContent = 'ğŸ”„ æ­£åœ¨é‡ç½®é¡µé¢çŠ¶æ€...';
            resetForm();
            await new Promise(resolve => setTimeout(resolve, 300)); // çŸ­æš‚å»¶è¿Ÿè®©ç”¨æˆ·çœ‹åˆ°é‡ç½®è¿‡ç¨‹
            outputElement.textContent = ''; // æ¸…ç©ºé‡ç½®æç¤º
            
            try {
                const script = scriptElement.value;
                
                // æ·»åŠ æ§åˆ¶å°è¾“å‡ºé‡å®šå‘
                const originalLog = console.log;
                const originalError = console.error;
                const originalWarn = console.warn;
                
                const logs = [];
                
                console.log = (...args) => {
                    logs.push('[LOG] ' + args.join(' '));
                    originalLog.apply(console, args);
                };
                
                console.error = (...args) => {
                    logs.push('[ERROR] ' + args.join(' '));
                    originalError.apply(console, args);
                };
                
                console.warn = (...args) => {
                    logs.push('[WARN] ' + args.join(' '));
                    originalWarn.apply(console, args);
                };
                
                // æ‰§è¡Œè„šæœ¬
                const result = await engine.runScript(script, scriptId);
                
                // æ¢å¤æ§åˆ¶å°
                console.log = originalLog;
                console.error = originalError;
                console.warn = originalWarn;
                
                // æ˜¾ç¤ºç»“æœ
                const output = [
                    `${result.success ? 'âœ… æˆåŠŸ' : 'âŒ å¤±è´¥'} (${result.duration}ms)`,
                    ...logs,
                    ...result.results.map(test => 
                        `${test.success ? 'âœ…' : 'âŒ'} ${test.name}${test.error ? ' - ' + test.error.message : ''}`
                    )
                ].join('\n');
                
                outputElement.textContent = output;
                
            } catch (error) {
                outputElement.textContent = `âŒ æ‰§è¡Œå¤±è´¥: ${error.message}`;
                console.error('è¿·ä½ è„šæœ¬æ‰§è¡Œå¤±è´¥:', error);
            } finally {
                // æ¢å¤æŒ‰é’®
                button.disabled = false;
                button.textContent = 'è¿è¡Œ';
            }
        }

        // è¿è¡Œè„šæœ¬çš„é€šç”¨å‡½æ•°
        async function runScript(scriptId) {
            const scriptElement = document.getElementById(scriptId);
            const outputElement = document.getElementById(scriptId + '-output');
            const button = scriptElement.nextElementSibling;
            
            // ç¦ç”¨æŒ‰é’®å¹¶æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            button.disabled = true;
            button.innerHTML = '<span class="loading"></span> æ‰§è¡Œä¸­...';
            
            // æ¸…ç©ºè¾“å‡º
            if (outputElement) {
                outputElement.textContent = '';
            } else {
                console.error('æ‰¾ä¸åˆ°è¾“å‡ºå…ƒç´ :', scriptId + '-output');
                return;
            }
            
            // æ‰§è¡Œæµ‹è¯•å‰é‡ç½®é¡µé¢çŠ¶æ€ï¼Œé˜²æ­¢ç”¨ä¾‹ç›¸äº’å½±å“
            if (outputElement) {
                outputElement.textContent = 'ğŸ”„ æ­£åœ¨é‡ç½®é¡µé¢çŠ¶æ€...';
            }
            resetForm();
            await new Promise(resolve => setTimeout(resolve, 300)); // çŸ­æš‚å»¶è¿Ÿè®©ç”¨æˆ·çœ‹åˆ°é‡ç½®è¿‡ç¨‹
            if (outputElement) {
                outputElement.textContent = ''; // æ¸…ç©ºé‡ç½®æç¤º
            }
            
            try {
                const script = scriptElement.value;
                console.log('æ‰§è¡Œè„šæœ¬:', script);
                
                // æ·»åŠ æ§åˆ¶å°è¾“å‡ºé‡å®šå‘
                const originalLog = console.log;
                const originalError = console.error;
                const originalWarn = console.warn;
                
                const logs = [];
                
                console.log = (...args) => {
                    logs.push('[LOG] ' + args.join(' '));
                    originalLog.apply(console, args);
                };
                
                console.error = (...args) => {
                    logs.push('[ERROR] ' + args.join(' '));
                    originalError.apply(console, args);
                };
                
                console.warn = (...args) => {
                    logs.push('[WARN] ' + args.join(' '));
                    originalWarn.apply(console, args);
                };
                
                // æ‰§è¡Œè„šæœ¬
                const result = await engine.runScript(script, scriptId);
                
                // æ¢å¤æ§åˆ¶å°
                console.log = originalLog;
                console.error = originalError;
                console.warn = originalWarn;
                
                // æ˜¾ç¤ºç»“æœ
                const output = [
                    `ğŸ“Š æ‰§è¡Œç»“æœ: ${result.success ? 'âœ… æˆåŠŸ' : 'âŒ å¤±è´¥'}`,
                    `â±ï¸ è€—æ—¶: ${result.duration}ms`,
                    `ğŸ§ª æµ‹è¯•æ•°é‡: ${result.results.length}`,
                    '',
                    'ğŸ“‹ è¯¦ç»†æ—¥å¿—:',
                    ...logs,
                    '',
                    'ğŸ” æµ‹è¯•è¯¦æƒ…:',
                    ...result.results.map(test => 
                        `  ${test.success ? 'âœ…' : 'âŒ'} ${test.name} (${test.duration}ms)${test.error ? '\n    é”™è¯¯: ' + test.error.message : ''}`
                    )
                ].join('\n');
                
                if (outputElement) {
                    outputElement.textContent = output;
                }
                
            } catch (error) {
                if (outputElement) {
                    outputElement.textContent = `âŒ æ‰§è¡Œå¤±è´¥:\n${error.message}\n\nå †æ ˆä¿¡æ¯:\n${error.stack}`;
                }
                console.error('è„šæœ¬æ‰§è¡Œå¤±è´¥:', error);
            } finally {
                // æ¢å¤æŒ‰é’®
                button.disabled = false;
                button.textContent = 'è¿è¡Œè„šæœ¬';
            }
        }

        // æµ‹è¯•é¡µé¢çš„è¾…åŠ©å‡½æ•°
        function showResult() {
            document.getElementById('result').style.display = 'block';
        }

        function resetForm() {
            document.getElementById('result').style.display = 'none';
            // åªæ¸…ç©ºæµ‹è¯•é¡µé¢åŒºåŸŸçš„è¡¨å•å…ƒç´ ï¼Œä¸å½±å“æµ‹è¯•è„šæœ¬çš„ textarea
            document.querySelectorAll('.test-page input, .test-page select, .test-page textarea').forEach(element => {
                if (element.type === 'checkbox' || element.type === 'radio') {
                    element.checked = false;
                } else if (element.tagName === 'SELECT' && element.multiple) {
                    Array.from(element.options).forEach(option => option.selected = false);
                } else {
                    element.value = '';
                }
            });
        }

        function toggleDynamicContent() {
            const content = document.getElementById('dynamic-content');
            if (content.style.display === 'none') {
                content.style.display = 'block';
            } else {
                content.style.display = 'none';
            }
        }

        // æ‚¬åœæ•ˆæœ
        document.addEventListener('DOMContentLoaded', function() {
            const hoverTarget = document.getElementById('hover-target');
            if (hoverTarget) {
                hoverTarget.addEventListener('mouseenter', function() {
                    this.style.backgroundColor = '#e9ecef';
                });
                hoverTarget.addEventListener('mouseleave', function() {
                    this.style.backgroundColor = '#f0f0f0';
                });
            }
        });

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ­ Playwright æ‰§è¡Œå¼•æ“æ¼”ç¤ºé¡µé¢åŠ è½½å®Œæˆ');
            console.log('å¼•æ“ç‰ˆæœ¬:', PlaywrightExecutionEngine.getVersion());
            
            // æ£€æŸ¥å…¼å®¹æ€§
            if (PlaywrightExecutionEngine.checkCompatibility()) {
                console.log('âœ… æµè§ˆå™¨å…¼å®¹æ€§æ£€æŸ¥é€šè¿‡');
            } else {
                console.warn('âš ï¸ æµè§ˆå™¨å…¼å®¹æ€§å­˜åœ¨é—®é¢˜');
            }
        });
    </script>
</body>
</html>